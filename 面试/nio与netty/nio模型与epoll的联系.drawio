<mxfile host="65bd71144e">
    <diagram id="9vkN7yE7dpngS0jgxhsY" name="第 1 页">
        <mxGraphModel dx="968" dy="558" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="3" value="Selector" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;comic=0;jiggle=1;" parent="1" vertex="1">
                    <mxGeometry x="256" y="40" width="116" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="8" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;sketch=1;" parent="1" source="5" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="14" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="5" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="Buffer" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="130" y="180" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="9" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;sketch=1;" parent="1" source="6" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="15" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="6" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="Buffer" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="273" y="180" width="81" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="10" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;startArrow=classic;startFill=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;sketch=1;" parent="1" source="7" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="370" y="110" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="7" target="13" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="Buffer" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;jiggle=1;" parent="1" vertex="1">
                    <mxGeometry x="430" y="180" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="23" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="11" target="20" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="Channel&lt;br&gt;&lt;br&gt;ServerSocket-Channel" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="130" y="280" width="80" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="24" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="12" target="21" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="Channel&lt;br&gt;&lt;br&gt;ServerChannel" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="274" y="280" width="80" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="25" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="13" target="22" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="Channel&lt;br&gt;&lt;br&gt;ServerChannel" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="430" y="280" width="80" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="客户端" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="130" y="460" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="客户端" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="274" y="460" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="客户端" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="430" y="460" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="Selector相当于epoll对象" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="50" width="151" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="Channel相当于是socket描述符：&lt;br&gt;① ServerSocketChannel listen_fd 监听socket描述字&lt;br&gt;② SocketChannel connection_fd 连接socket描述字" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="540" y="330" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="Buffer相当于是c里面的需要手动分配手动回收的内存（这里指的是使用直接内存的情况）" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;align=center;" parent="1" vertex="1">
                    <mxGeometry x="540" y="200" width="300" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="selectionKeys = selector.selectKeys()相当于调用系统调用epoll_wait，可以得到所有的epoll_event。&lt;br&gt;这里的SelectionKey和epoll_event基本是相同的东西，可以遍历这个集合得到每个事件和对应的socket，进行相应的操作。" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="420" y="40" width="240" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="但在Java nio中，对事件进行了细分，如果是listen_fd发生EPOLLIN在java中对应OP_ACCEPT，而connection_fd对应OP_READ" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#f8cecc;strokeColor=#b85450;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="690" y="130" width="380" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="36" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;startArrow=classic;startFill=1;" edge="1" parent="1" source="35" target="34">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="在使用系统调用时，listen_fd和connection_fd都可以添加到epoll中，但这两个不同的文件描述符触发相同event遇到的情况是不同的，例如EPOLLIN事件：&lt;br&gt;① epitem节点描述符为listen_fd：发生了连接事件&lt;br&gt;② epitem节点描述符为connection_fd：可读事件，有消息到来" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#dae8fc;strokeColor=#6c8ebf;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="690" y="10" width="380" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="39" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="37" target="38">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="42" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="37" target="41">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="io多路复用(nio)的优点&lt;br&gt;（与bio的阻塞+多线程方案对比）：&lt;br&gt;① 连接数不再直接与线程数挂钩，一个线程可以管理成百上千的链接，最直接的优点就是节省内存开销&lt;br&gt;② 在高并发场景下，nio可以一个线程管理大量连接的读写事件(nio线程读写，或分配给其他工作线程进行操作)，而bio只能是唤醒大量的线程，例如1000个并发读事件，则需要调度1000个线程，会使用大量的时间在进程调度上，效率很低" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="112" y="555" width="260" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="补充：&lt;br&gt;① 现在很多的应用场景都使用TCP长连接，但是其实真正发生数据读写的时间是较短的，很多线程都阻塞等待读写数据，虽然不占用CPU，但还是会占用内存资源，例如linux系统下一个线程默认会占用1M内存" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="420" y="560" width="240" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="客户端" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="430" y="460" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="45" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="41" target="43">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="46" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="41" target="44">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="节省的开销" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="420" y="690" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="内存占用" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="540" y="670" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="进程调度" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="540" y="720" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="nio和epoll系统调用简单demo对比" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="361" y="790" width="106" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="50" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="48" target="49">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="epoll" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="244.5" y="870" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="49" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;main&lt;/span&gt;() {&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;创建监听的套接字&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;lfd &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;socket&lt;/span&gt;(&lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;AF_INET&lt;/span&gt;, &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;SOCK_STREAM&lt;/span&gt;, &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;);&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;绑定端口&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;ret &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;bind&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;lfd&lt;/span&gt;, (&lt;span style=&quot;color: #0033b3&quot;&gt;struct &lt;/span&gt;&lt;span style=&quot;color: #008080&quot;&gt;sockaddr&lt;/span&gt;*)&amp;amp;&lt;span style=&quot;color: #000000&quot;&gt;serv_addr&lt;/span&gt;, &lt;span style=&quot;color: #0033b3&quot;&gt;sizeof&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;serv_addr&lt;/span&gt;));&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;监听&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;ret &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;listen&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;lfd&lt;/span&gt;, &lt;span style=&quot;color: #1750eb&quot;&gt;64&lt;/span&gt;);&lt;br&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;    // &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;创建一个&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;epoll&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;模型&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;epfd &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;epoll_create&lt;/span&gt;(&lt;span style=&quot;color: #1750eb&quot;&gt;100&lt;/span&gt;);&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;struct &lt;/span&gt;&lt;span style=&quot;color: #008080&quot;&gt;epoll_event &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;events &lt;/span&gt;= &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;EPOLLIN&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;data&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;fd &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;lfd&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #000000&quot;&gt;ret &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;epoll_ctl&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;epfd&lt;/span&gt;, &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;EPOLL_CTL_ADD&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;lfd&lt;/span&gt;, &amp;amp;&lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;);&lt;br&gt;    &lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;struct &lt;/span&gt;&lt;span style=&quot;color: #008080&quot;&gt;epoll_event &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;evs&lt;/span&gt;[&lt;span style=&quot;color: #1750eb&quot;&gt;1024&lt;/span&gt;];&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;size &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;sizeof&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;evs&lt;/span&gt;) / &lt;span style=&quot;color: #0033b3&quot;&gt;sizeof&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;struct &lt;/span&gt;&lt;span style=&quot;color: #008080&quot;&gt;epoll_event&lt;/span&gt;);&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;持续检测&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;while &lt;/span&gt;(&lt;span style=&quot;color: #1750eb&quot;&gt;1&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;num &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;epoll_wait&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;epfd&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;evs&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;size&lt;/span&gt;, -&lt;span style=&quot;color: #1750eb&quot;&gt;1&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;i &lt;/span&gt;= &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;; &lt;span style=&quot;color: #000000&quot;&gt;i &lt;/span&gt;&amp;lt; &lt;span style=&quot;color: #000000&quot;&gt;num&lt;/span&gt;; ++&lt;span style=&quot;color: #000000&quot;&gt;i&lt;/span&gt;) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;curfd &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;evs&lt;/span&gt;[&lt;span style=&quot;color: #000000&quot;&gt;i&lt;/span&gt;].&lt;span style=&quot;color: #660e7a&quot;&gt;data&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;fd&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;curfd &lt;/span&gt;== &lt;span style=&quot;color: #000000&quot;&gt;lfd&lt;/span&gt;) {&lt;br&gt;                &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;建立新的连接&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;cfd &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;accept&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;curfd&lt;/span&gt;, &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;NULL&lt;/span&gt;, &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;NULL&lt;/span&gt;);&lt;br&gt;                &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;新得到的文件描述符添加到&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;epoll&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;模型中&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;下一轮循环的时候就可以被检测了&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;events &lt;/span&gt;= &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;EPOLLIN&lt;/span&gt;;&lt;br&gt;                &lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;data&lt;/span&gt;.&lt;span style=&quot;color: #660e7a&quot;&gt;fd &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;cfd&lt;/span&gt;;&lt;br&gt;                &lt;span style=&quot;color: #795e26&quot;&gt;epoll_ctl&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;epfd&lt;/span&gt;, &lt;span style=&quot;color: #1f542e ; font-weight: bold&quot;&gt;EPOLL_CTL_ADD&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;cfd&lt;/span&gt;, &amp;amp;&lt;span style=&quot;color: #000000&quot;&gt;ev&lt;/span&gt;);&lt;br&gt;            }&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;else &lt;/span&gt;{&lt;br&gt;                &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;处理通信的文件描述符&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;char &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;[&lt;span style=&quot;color: #1750eb&quot;&gt;1024&lt;/span&gt;];&lt;br&gt;                &lt;span style=&quot;color: #795e26&quot;&gt;memset&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;, &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;, &lt;span style=&quot;color: #0033b3&quot;&gt;sizeof&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;));&lt;br&gt;                &lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;len &lt;/span&gt;= &lt;span style=&quot;color: #795e26&quot;&gt;recv&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;curfd&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;, &lt;span style=&quot;color: #0033b3&quot;&gt;sizeof&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;), &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;);&lt;br&gt;                &lt;span style=&quot;color: #795e26&quot;&gt;printf&lt;/span&gt;(&lt;span style=&quot;color: #067d17&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;客户端&lt;/span&gt;&lt;span style=&quot;color: #067d17&quot;&gt;say: %s&lt;/span&gt;&lt;span style=&quot;color: #0037a6&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #067d17&quot;&gt;&quot;&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;);&lt;br&gt;                &lt;span style=&quot;color: #795e26&quot;&gt;send&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;curfd&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;buf&lt;/span&gt;, &lt;span style=&quot;color: #000000&quot;&gt;len&lt;/span&gt;, &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;);&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;" vertex="1" parent="1">
                    <mxGeometry x="40" y="930" width="500" height="620" as="geometry"/>
                </mxCell>
                <mxCell id="53" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;startArrow=none;startFill=0;" edge="1" parent="1" source="51" target="52">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="Java Nio" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="765" y="870" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public class &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;MyServer &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public static void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;main&lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;String&lt;/span&gt;[] args) &lt;span style=&quot;color: #0033b3&quot;&gt;throws &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;IOException &lt;/span&gt;{&lt;br&gt;       &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;ServerSocketChannel &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;serverSocketChannel &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;ServerSocketChannel&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;open&lt;/span&gt;();&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: #000000&quot;&gt;serverSocketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;socket&lt;/span&gt;().&lt;span style=&quot;color: #795e26&quot;&gt;bind&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;InetSocketAddress&lt;/span&gt;(&lt;span style=&quot;color: #1750eb&quot;&gt;6666&lt;/span&gt;));&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// int epfd = epoll_create(100);&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Selector &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;selector &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Selector&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;open&lt;/span&gt;();&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;设置为非阻塞&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;serverSocketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;configureBlocking&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;false&lt;/span&gt;);&lt;br&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;serverSocketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;register&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;selector&lt;/span&gt;, &lt;span style=&quot;color: #066555&quot;&gt;SelectionKey&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;OP_ACCEPT&lt;/span&gt;);&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;while &lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;true&lt;/span&gt;) {&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;eventNum &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;selector&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;select&lt;/span&gt;(&lt;span style=&quot;color: #1750eb&quot;&gt;1000&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;eventNum &lt;/span&gt;== &lt;span style=&quot;color: #1750eb&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;                &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;无事件&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;~&quot;&lt;/span&gt;);&lt;br&gt;                &lt;span style=&quot;color: #0033b3&quot;&gt;continue&lt;/span&gt;;&lt;br&gt;            }&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Set&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #066555&quot;&gt;SelectionKey&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #000000&quot;&gt;selectionKeys &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;selector&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;selectedKeys&lt;/span&gt;();&lt;br&gt;            &lt;span style=&quot;color: #6c00d5&quot;&gt;Iterator&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #066555&quot;&gt;SelectionKey&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #000000&quot;&gt;keyIterator &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;selectionKeys&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;iterator&lt;/span&gt;();&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;while &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;keyIterator&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;hasNext&lt;/span&gt;()) {&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;SelectionKey &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;key &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;keyIterator&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;next&lt;/span&gt;();&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;isAcceptable&lt;/span&gt;()) {&lt;br&gt;                    &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;客户端连接成功&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;~&quot;&lt;/span&gt;);&lt;br&gt;                    &lt;span style=&quot;color: #066555&quot;&gt;SocketChannel &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;socketChannel &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;serverSocketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;accept&lt;/span&gt;();&lt;br&gt;                    &lt;span style=&quot;color: #000000&quot;&gt;socketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;configureBlocking&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;false&lt;/span&gt;);&lt;br&gt;                    &lt;span style=&quot;color: #000000&quot;&gt;socketChannel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;register&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;selector&lt;/span&gt;, &lt;span style=&quot;color: #066555&quot;&gt;SelectionKey&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;OP_READ&lt;/span&gt;, &lt;span style=&quot;color: #066555&quot;&gt;ByteBuffer&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;allocate&lt;/span&gt;(&lt;span style=&quot;color: #1750eb&quot;&gt;1024&lt;/span&gt;));&lt;br&gt;                }&lt;br&gt;                &lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;isReadable&lt;/span&gt;()) {&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;SocketChannel &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;channel &lt;/span&gt;= (&lt;span style=&quot;color: #066555&quot;&gt;SocketChannel&lt;/span&gt;) &lt;span style=&quot;color: #000000&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;channel&lt;/span&gt;();&lt;br&gt;                    &lt;span style=&quot;color: #066555&quot;&gt;ByteBuffer &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;buffer &lt;/span&gt;= (&lt;span style=&quot;color: #066555&quot;&gt;ByteBuffer&lt;/span&gt;) &lt;span style=&quot;color: #000000&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;attachment&lt;/span&gt;();&lt;br&gt;                    &lt;span style=&quot;color: #0033b3&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;read &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;channel&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;read&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;buffer&lt;/span&gt;);&lt;br&gt;                    &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;from &lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;客户端：&lt;/span&gt;&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot; &lt;/span&gt;+ &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;String&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;buffer&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;array&lt;/span&gt;()));&lt;br&gt;                }&lt;br&gt;&lt;br&gt;                &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;移除&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;selectionKey&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;keyIterator&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;remove&lt;/span&gt;();&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/pre&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;comic=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;" vertex="1" parent="1">
                    <mxGeometry x="560" y="930" width="620" height="590" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>