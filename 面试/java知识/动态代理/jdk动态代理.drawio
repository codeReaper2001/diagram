<mxfile host="65bd71144e">
    <diagram id="5f8HpDCFyVGYVeMRk6HM" name="第 1 页">
        <mxGraphModel dx="968" dy="558" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="4" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;sketch=1;" edge="1" parent="1" source="2" target="3">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="要代理的接口" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="40" y="50" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="8" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="3" target="6">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public interface &lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;foo&lt;/span&gt;();&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;bar&lt;/span&gt;();&lt;br&gt;}&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="210" y="35" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="5" target="6">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="实现类" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="55" y="182.5" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public class &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Target &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;implements &lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #9e880d&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;foo&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;foo&quot;&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #9e880d&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;bar&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;bar&quot;&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="170" y="120" width="220" height="155" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;span style=&quot;color: #066555&quot;&gt;Target &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;target &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;Target&lt;/span&gt;();&lt;br&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;proxyObject &lt;/span&gt;= (&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo&lt;/span&gt;) &lt;span style=&quot;color: #066555&quot;&gt;Proxy&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;newProxyInstance&lt;/span&gt;(&lt;br&gt;        &lt;span style=&quot;color: #066555&quot;&gt;Thread&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;currentThread&lt;/span&gt;().&lt;span style=&quot;color: #795e26&quot;&gt;getContextClassLoader&lt;/span&gt;(),&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;Class&lt;/span&gt;[]{&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo&lt;/span&gt;.&lt;span style=&quot;color: #0033b3&quot;&gt;class&lt;/span&gt;},&lt;br&gt;        (proxy, method, args1) -&amp;gt; {&lt;br&gt;            &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;method start...&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #066555&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;result &lt;/span&gt;= method.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #851691&quot;&gt;target&lt;/span&gt;, args1);&lt;br&gt;            &lt;span style=&quot;color: #066555&quot;&gt;System&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;out&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;println&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;method end...&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;;&lt;br&gt;        });&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="414" y="120" width="350" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="11" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="10" target="9">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="生成代理类" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="539" y="50" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public final class &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;$Proxy0 &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;extends &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Proxy &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;implements &lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Foo &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;private static &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Method &lt;/span&gt;&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m1&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;private static &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Method &lt;/span&gt;&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m2&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;private static &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Method &lt;/span&gt;&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m3&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;private static &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Method &lt;/span&gt;&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m4&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;private static &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Method &lt;/span&gt;&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m0&lt;/span&gt;;&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;$Proxy0&lt;/span&gt;(&lt;span style=&quot;color: #6c00d5&quot;&gt;InvocationHandler &lt;/span&gt;var1) {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;(var1);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;static &lt;/span&gt;{&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m1 &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;java.lang.Object&quot;&lt;/span&gt;).&lt;span style=&quot;color: #795e26&quot;&gt;getMethod&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;equals&quot;&lt;/span&gt;, &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;java.lang.Object&quot;&lt;/span&gt;));&lt;br&gt;            &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m2 &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;java.lang.Object&quot;&lt;/span&gt;).&lt;span style=&quot;color: #795e26&quot;&gt;getMethod&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;toString&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m3 &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;proxy.demo.jdk.Foo&quot;&lt;/span&gt;).&lt;span style=&quot;color: #795e26&quot;&gt;getMethod&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;foo&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m4 &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;proxy.demo.jdk.Foo&quot;&lt;/span&gt;).&lt;span style=&quot;color: #795e26&quot;&gt;getMethod&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;bar&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m0 &lt;/span&gt;= &lt;span style=&quot;color: #066555&quot;&gt;Class&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;forName&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;java.lang.Object&quot;&lt;/span&gt;).&lt;span style=&quot;color: #795e26&quot;&gt;getMethod&lt;/span&gt;(&lt;span style=&quot;color: #067d17 ; font-weight: bold&quot;&gt;&quot;hashCode&quot;&lt;/span&gt;);&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;NoSuchMethodException &lt;/span&gt;var2) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;NoSuchMethodError&lt;/span&gt;(var2.&lt;span style=&quot;color: #795e26&quot;&gt;getMessage&lt;/span&gt;());&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;ClassNotFoundException &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;NoClassDefFoundError&lt;/span&gt;(var3.&lt;span style=&quot;color: #795e26&quot;&gt;getMessage&lt;/span&gt;());&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public final boolean &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;equals&lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Object &lt;/span&gt;var1) {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Boolean&lt;/span&gt;)&lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m1&lt;/span&gt;, &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;Object&lt;/span&gt;[]{var1});&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;RuntimeException &lt;/span&gt;| &lt;span style=&quot;color: #066555&quot;&gt;Error &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;var3;&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Throwable &lt;/span&gt;var4) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;UndeclaredThrowableException&lt;/span&gt;(var4);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public final &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;String &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;toString&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;String&lt;/span&gt;)&lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m2&lt;/span&gt;, (&lt;span style=&quot;color: #066555&quot;&gt;Object&lt;/span&gt;[])&lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;);&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;RuntimeException &lt;/span&gt;| &lt;span style=&quot;color: #066555&quot;&gt;Error &lt;/span&gt;var2) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;var2;&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Throwable &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;UndeclaredThrowableException&lt;/span&gt;(var3);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public final int &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;hashCode&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Integer&lt;/span&gt;)&lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m0&lt;/span&gt;, (&lt;span style=&quot;color: #066555&quot;&gt;Object&lt;/span&gt;[])&lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;);&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;RuntimeException &lt;/span&gt;| &lt;span style=&quot;color: #066555&quot;&gt;Error &lt;/span&gt;var2) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;var2;&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Throwable &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;UndeclaredThrowableException&lt;/span&gt;(var3);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public final void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;foo&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m3&lt;/span&gt;, (&lt;span style=&quot;color: #066555&quot;&gt;Object&lt;/span&gt;[])&lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;);&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;RuntimeException &lt;/span&gt;| &lt;span style=&quot;color: #066555&quot;&gt;Error &lt;/span&gt;var2) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;var2;&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Throwable &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;UndeclaredThrowableException&lt;/span&gt;(var3);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;public final void &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;bar&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;super&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;.&lt;span style=&quot;color: #795e26&quot;&gt;invoke&lt;/span&gt;(&lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;m4&lt;/span&gt;, (&lt;span style=&quot;color: #066555&quot;&gt;Object&lt;/span&gt;[])&lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;);&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;RuntimeException &lt;/span&gt;| &lt;span style=&quot;color: #066555&quot;&gt;Error &lt;/span&gt;var2) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;var2;&lt;br&gt;        } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #066555&quot;&gt;Throwable &lt;/span&gt;var3) {&lt;br&gt;            &lt;span style=&quot;color: #0033b3&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;UndeclaredThrowableException&lt;/span&gt;(var3);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="230" y="290" width="650" height="1000" as="geometry"/>
                </mxCell>
                <mxCell id="17" style="sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=11;entryX=0.001;entryY=0.09;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="13" target="12">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="180" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="13" value="最终得到的&lt;b&gt;代理类&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="40" y="365" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="19" style="edgeStyle=none;sketch=1;html=1;fontSize=11;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="18">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="440" y="405" as="sourcePoint"/>
                        <mxPoint x="460" y="395" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="18" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;consolas&amp;#34; , monospace ; font-size: 11px&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;consolas&amp;#34; , monospace&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;public class &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;Proxy &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;implements &lt;/span&gt;&lt;span style=&quot;color: #066555&quot;&gt;java.io.&lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;Serializable &lt;/span&gt;{&lt;br&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;    ...&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;protected &lt;/span&gt;&lt;span style=&quot;color: #6c00d5&quot;&gt;InvocationHandler &lt;/span&gt;&lt;span style=&quot;color: #871094&quot;&gt;h&lt;/span&gt;;&lt;br&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;protected &lt;/span&gt;&lt;span style=&quot;color: #795e26&quot;&gt;Proxy&lt;/span&gt;(&lt;span style=&quot;color: #6c00d5&quot;&gt;InvocationHandler &lt;/span&gt;h) {&lt;br&gt;        &lt;span style=&quot;color: #066555&quot;&gt;Objects&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;requireNonNull&lt;/span&gt;(h);&lt;br&gt;        &lt;span style=&quot;color: #0033b3&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color: #871094&quot;&gt;h &lt;/span&gt;= h;&lt;br&gt;    }&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;comic=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="510" y="350" width="320" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="这个代理类是在运行时生成字节码而形成的。&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;comic=1;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="40" y="430" width="180" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="这个代理类是继承自Proxy类，内部包含InvocationHandler的成员变量，当创建代理对象时会：&lt;br&gt;① 先生成代理类字节码&lt;br&gt;② 类加载&lt;br&gt;③ 创建代理对象，将传入的InvocationHandler进一步传入代理类构造函数，this.h = invocationHandler" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="10" y="480" width="210" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="代理类在&lt;b&gt;类加载阶段&lt;/b&gt;即完成了&lt;b&gt;反射获取所有的方法&lt;/b&gt;，变成类中的静态方法，这样每个方法进行方法调用时，即可使用h.invoke(this, 方法静态变量, 参数)进行拦截，最终执行到定义的操作逻辑" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="10" y="630" width="210" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="此外，如果Proxy.newProxyInstance()中&lt;b&gt;传入的接口参数相同&lt;/b&gt;的话，那么就不会重新生成代理类，而是复用原来的代理类，只是多生成一个代理对象" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;comic=1;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="10" y="730" width="210" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="由于jdk动态代理生成的代理类继承自Proxy类，因此要完成代理时，&lt;b&gt;被代理的目标类必须要有对应的接口&lt;/b&gt;才行(因为java类不能多继承)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;comic=1;sketch=1;align=left;" vertex="1" parent="1">
                    <mxGeometry x="890" y="320" width="260" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="实现" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="26" target="27">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="实现" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="26" target="29">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="接口" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="900" y="435" width="50" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="36" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="27" target="35">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="实现类" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="990" y="400" width="50" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="42" style="edgeStyle=none;sketch=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="29" target="40">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="代理类" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;comic=1;align=center;" vertex="1" parent="1">
                    <mxGeometry x="990" y="470" width="50" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="继承" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="31" target="29">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="Proxy" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="990" y="535" width="50" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="实现类对象" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;" vertex="1" parent="1">
                    <mxGeometry x="1070" y="400" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="1070" y="470" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="代理类对象" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;comic=1;align=left;" vertex="1" parent="41">
                    <mxGeometry width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="h" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;comic=1;" vertex="1" parent="41">
                    <mxGeometry x="64" y="4.5" width="20" height="21" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="引用" style="edgeStyle=none;sketch=1;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;dashed=1;" edge="1" parent="1" source="35" target="33">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>