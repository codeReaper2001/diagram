<mxfile host="65bd71144e">
    <diagram id="vDI8rdkjuRQJPy-rQnWN" name="第 1 页">
        <mxGraphModel dx="1290" dy="536" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="298" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="230" y="2330" width="524" height="830" as="geometry"/>
                </mxCell>
                <mxCell id="361" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="240" y="2946" width="390" height="205" as="geometry"/>
                </mxCell>
                <mxCell id="341" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="530" y="2702.25" width="320" height="297.75" as="geometry"/>
                </mxCell>
                <mxCell id="142" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="234" y="1410" width="520" height="800" as="geometry"/>
                </mxCell>
                <mxCell id="294" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="292" target="252">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="552.25" y="2140.6800000000003" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="2" value="ConcurrentHashMap内部属性" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="290" y="20" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="ConcurrentHashMap重要的静态属性" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=0;align=center;pointerEvents=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="155" y="70" width="430" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="30" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="&lt;font style=&quot;font-size: 10px&quot;&gt;DEFAULT_INITIAL_CAPACITY&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="4" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="6" value="&lt;font style=&quot;font-size: 10px&quot;&gt;默认容量值 16&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="4" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="7" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="60" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MAXIMUM_CAPACITY&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="7" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="9" value="&lt;font style=&quot;font-size: 10px&quot;&gt;容量最大值 1&amp;lt;&amp;lt;30&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="7" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="10" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="90" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="&lt;font style=&quot;font-size: 10px&quot;&gt;DEFAULT_LOAD_FACTOR&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="10" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="12" value="&lt;font style=&quot;font-size: 10px&quot;&gt;负载因子 0.75&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="10" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="13" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="120" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="&lt;font style=&quot;font-size: 10px&quot;&gt;TREEIFY_THRESHOLD&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="13" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="15" value="&lt;span style=&quot;font-size: 10px&quot;&gt;树化阈值 8&lt;br&gt;（桶上的节点多于该值则会由链表转为树）&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="13" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="150" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&lt;font style=&quot;font-size: 10px&quot;&gt;UNTREEIFY_THRESHOLD&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="16" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="18" value="&lt;span style=&quot;font-size: 10px&quot;&gt;取消树化阈值 6&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="16" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="19" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="180" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MIN_TREEIFY_CAPACITY&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="19" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="21" value="&lt;span style=&quot;font-size: 10px&quot;&gt;最小树化容量 64&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="19" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="25" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="210" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MIN_TRANSFER_STRIDE&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="25" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="27" value="&lt;span style=&quot;font-size: 10px&quot;&gt;扩容数据迁移最少任务数量 16&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="25" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="53" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="240" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="&lt;font style=&quot;font-size: 10px&quot;&gt;NCPU&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="53" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="55" value="&lt;span style=&quot;font-size: 10px&quot;&gt;CPU数量&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="53" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="56" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3" vertex="1">
                    <mxGeometry y="270" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="&lt;font style=&quot;font-size: 10px&quot;&gt;HASH_BITS&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="56" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="58" value="&lt;span style=&quot;font-size: 10px&quot;&gt;0x7fffffff，将hash码转为正数的掩码&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="56" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="31" value="Node的hash值" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=0;align=center;pointerEvents=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="155" y="370" width="430" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="31" vertex="1">
                    <mxGeometry y="30" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MOVED&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="32" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="34" value="&lt;font style=&quot;font-size: 10px&quot;&gt;代表ForwardingNode -1&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="32" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="35" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="31" vertex="1">
                    <mxGeometry y="60" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="&lt;font style=&quot;font-size: 10px&quot;&gt;TREEBIN&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="35" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="37" value="&lt;font style=&quot;font-size: 10px&quot;&gt;红黑树根节点标识 -2&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="35" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="59" value="ConcurrentHashMap字段" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=0;align=center;pointerEvents=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="155" y="480" width="430" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="60" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="30" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="61" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Node&amp;lt;K,V&amp;gt;[] table&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="60" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="62" value="&lt;span style=&quot;font-size: 10px&quot;&gt;桶数组，大小总为2的幂，初始值为null&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="60" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="66" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="60" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="&lt;span style=&quot;font-size: 10px&quot;&gt;Node&amp;lt;K,V&amp;gt;[] nextTable&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="66" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="68" value="&lt;span style=&quot;font-size: 10px&quot;&gt;用于扩容的数组，初始为null&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="66" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="69" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="90" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="70" value="&lt;font style=&quot;font-size: 10px&quot;&gt;long baseCount&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="69" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="71" value="&lt;span style=&quot;font-size: 10px&quot;&gt;用于cas并发计数的变量&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="69" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="72" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="120" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="73" value="&lt;font style=&quot;font-size: 10px&quot;&gt;CounterCell[] counterCells&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="72" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="74" value="&lt;span style=&quot;font-size: 10px&quot;&gt;辅助计数的数组&lt;br&gt;&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="72" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="75" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="150" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="76" value="&lt;font style=&quot;font-size: 10px&quot;&gt;int cellsBusy&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="75" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="77" value="&lt;span style=&quot;font-size: 10px&quot;&gt;并发cas的cell数量&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="75" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="82" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="180" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="83" value="&lt;font style=&quot;font-size: 10px&quot;&gt;int sizeCtl&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="82" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="84" value="&lt;span style=&quot;font-size: 10px&quot;&gt;这个字段包含多种含义，下面解释&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="82" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="85" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="59" vertex="1">
                    <mxGeometry y="210" width="430" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="86" value="&lt;font style=&quot;font-size: 10px&quot;&gt;int transferIndex&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="85" vertex="1">
                    <mxGeometry width="220" height="30" as="geometry">
                        <mxRectangle width="220" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="87" value="&lt;span style=&quot;font-size: 10px&quot;&gt;记录下一个迁移的桶下标(transferIndex-1)&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="85" vertex="1">
                    <mxGeometry x="220" width="210" height="30" as="geometry">
                        <mxRectangle width="210" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="81" value="&lt;span style=&quot;font-size: 10px&quot;&gt;CounterCell对象只有一个属性volatile long&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;value&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" parent="1" vertex="1">
                    <mxGeometry x="590" y="600" width="140" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="94" value="sizeCtl的含义" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="290" y="760" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="97" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="95" target="96" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="109" value="" style="edgeStyle=none;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="95" target="102" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="113" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="95" target="110" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="117" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="95" target="114" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="95" value="sizeCtl" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="120" y="880" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="100" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="96" target="98" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="96" value="sizeCtl==0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="260" y="810" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="98" value="代表桶数组未初始化，且初始容量应为16" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="390" y="810" width="270" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="101" value="&lt;span style=&quot;font-size: 10px&quot;&gt;在第一次put时初始化设置为16&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" parent="1" vertex="1">
                    <mxGeometry x="510" y="780" width="140" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="104" value="" style="edgeStyle=none;html=1;fontSize=11;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="102" target="103" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="105" value="已初始化" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" parent="104" vertex="1" connectable="0">
                    <mxGeometry x="0.3745" relative="1" as="geometry">
                        <mxPoint x="-10" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="107" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="102" target="106" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="108" value="未初始化" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" parent="107" vertex="1" connectable="0">
                    <mxGeometry x="-0.5054" y="-1" relative="1" as="geometry">
                        <mxPoint x="22" y="-6" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="102" value="sizeCtl&amp;gt;0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="260" y="870" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="103" value="表示哈希表的扩容阈值，即：当前容量*0.75" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="414" y="890" width="270" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="数组的初始容量" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="414" y="850" width="270" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="110" value="sizeCtl==-1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="260" y="930" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="111" value="数组正在进行初始化" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="390" y="930" width="180" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="112" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="110" target="111" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="350" y="825" as="sourcePoint"/>
                        <mxPoint x="400" y="825" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="114" value="sizeCtl&amp;lt;-1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="260" y="970" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="115" value="表示数组正在扩容，值为-(1+n)，其中n为&lt;b&gt;协助扩容的线程数&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="390" y="970" width="310" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="116" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" parent="1" source="114" target="115" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="1004.9999999999998" as="sourcePoint"/>
                        <mxPoint x="400" y="885" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="118" value="ConcurrentHashMap构造函数" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="272.5" y="1040" width="215" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="119" value="HashMap的构造函数" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=0;align=center;pointerEvents=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="131.25" y="1090" width="497.5" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="120" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="119" vertex="1">
                    <mxGeometry y="30" width="497.5" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="121" value="&lt;span style=&quot;font-size: 10px&quot;&gt;ConcurrentHashMap()&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="120" vertex="1">
                    <mxGeometry width="280" height="30" as="geometry">
                        <mxRectangle width="280" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="122" value="&lt;span style=&quot;font-size: 10px&quot;&gt;内部逻辑为空，即什么都不做&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="120" vertex="1">
                    <mxGeometry x="280" width="218" height="30" as="geometry">
                        <mxRectangle width="218" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="123" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="119" vertex="1">
                    <mxGeometry y="60" width="497.5" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="124" value="&lt;span style=&quot;font-size: 10px&quot;&gt;ConcurrentHashMap(int initialCapacity)&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="123" vertex="1">
                    <mxGeometry width="280" height="40" as="geometry">
                        <mxRectangle width="280" height="40" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="125" value="&lt;font size=&quot;1&quot;&gt;设置sizeCtl为大于等于&lt;/font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;initialCapacity*1.5+1的2^n的数&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="123" vertex="1">
                    <mxGeometry x="280" width="218" height="40" as="geometry">
                        <mxRectangle width="218" height="40" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="129" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="119" vertex="1">
                    <mxGeometry y="100" width="497.5" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="130" value="&lt;font style=&quot;font-size: 10px&quot;&gt;ConcurrentHashMap(Map&amp;lt;? extends K, ? extends V&amp;gt; m)&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="129" vertex="1">
                    <mxGeometry width="280" height="30" as="geometry">
                        <mxRectangle width="280" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="131" value="&lt;span style=&quot;font-size: 10px&quot;&gt;将输入的map的内容put到当前map&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="129" vertex="1">
                    <mxGeometry x="280" width="218" height="30" as="geometry">
                        <mxRectangle width="218" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="132" value="&lt;span style=&quot;font-size: 10px&quot;&gt;假设&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;initialCapacity取16，则计算得到的sizeCtl为32，根据上面的sizeCtl的含义知道此时32为当前桶数组容量&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" parent="1" vertex="1">
                    <mxGeometry x="640" y="1140" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="133" value="put方法" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="319.37" y="1350" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="134" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;labelBackgroundColor=none;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="145" y="1410" width="30" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="135" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;fontSize=10;" parent="1" source="134" target="137" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="160" y="1460" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="136" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="137" target="140" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="160.04666666666662" y="1520" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="144" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;dashed=1;rounded=0;" parent="1" source="137" target="143" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="137" value="&lt;span&gt;调用putVal方法&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="103.75" y="1460" width="112.5" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="140" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;labelBackgroundColor=none;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="145.63" y="1520" width="30" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="141" value="另外，Node等内部类的定义与HashMap的基本相同，这里不再赘述" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="279.38" y="1260" width="201.25" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="147" value="" style="rounded=0;html=1;fontSize=11;" parent="1" source="143" target="146" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="检验key和value都不能为null，否则抛异常" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="283" y="1440" width="130.62" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="145" value="V putVal(K key, V value, boolean onlyIfAbsent)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="233.97" y="1410" width="287" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="149" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;dashed=1;" parent="1" source="146" target="148" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="153" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="146" target="152">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="146" value="调用spread(key.hashCode())计算hash值" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="286.06" y="1500" width="127.94" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="148" value="返回(h ^ (h &amp;gt;&amp;gt;&amp;gt; 16)) &amp;amp; HASH_BITS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="438.75" y="1505" width="191.25" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="150" value="&lt;span style=&quot;font-size: 10px&quot;&gt;h^(h&amp;gt;&amp;gt;&amp;gt;16)是为了进行哈希扰动，最后和HASH_BIITS进行于运算是为了使hash值是一个正数&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" parent="1" vertex="1">
                    <mxGeometry x="459.38" y="1440" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="151" value="&lt;span style=&quot;font-size: 10px&quot;&gt;根据上面的定义，这里hash值需要为正数是为了和MOVE的-1以及红黑树根节点的-2区分开来，即一般的链表节点的hash值为正数&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="754" y="1485.38" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="152" value="table是否为空" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="305.03" y="1560" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="154" style="rounded=0;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="152" target="157">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="311.8699999999999" y="1435" as="sourcePoint"/>
                        <mxPoint x="349.30999999999995" y="1435" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="155" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="154">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="-10" y="-3" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="279" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="157" target="276">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="157" value="调用initTable方法初始化桶数组" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="436.03000000000003" y="1555" width="87.94" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="158" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
                    <mxGeometry x="670" y="1552.88" width="303" height="365" as="geometry"/>
                </mxCell>
                <mxCell id="159" value="Node&amp;lt;K,V&amp;gt;[] initTable()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="670" y="1552.88" width="143" height="15" as="geometry"/>
                </mxCell>
                <mxCell id="162" value="" style="edgeStyle=none;html=1;fontSize=11;" edge="1" parent="1" source="160" target="161">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="163" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="162">
                    <mxGeometry x="0.4" y="1" relative="1" as="geometry">
                        <mxPoint x="-2" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="198" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#00CC00;strokeColor=#000000;" edge="1" parent="1" source="160" target="196">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="160" value="tab==null||&lt;br&gt;tab.length==0" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="699" y="1577.88" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="165" value="" style="edgeStyle=none;html=1;fontSize=11;" edge="1" parent="1" source="161" target="164">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="166" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="165">
                    <mxGeometry x="0.3207" y="-3" relative="1" as="geometry">
                        <mxPoint x="-8" y="-2" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="161" value="sizeCtl&amp;lt;0?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="704" y="1640.38" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="188" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;" edge="1" parent="1" source="164" target="160">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="164" value="调用Thread.yield()让出CPU使用权" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="823" y="1640.38" width="130" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="167" value="&lt;span style=&quot;font-size: 10px&quot;&gt;sizeCtl&amp;lt;0，此时表示当前存在线程正在执行初始化操作，因此这里直接等待&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="973" y="1625.38" width="133" height="62.5" as="geometry"/>
                </mxCell>
                <mxCell id="170" value="" style="edgeStyle=none;html=1;fontSize=11;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="161" target="172">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="759" y="1627.88" as="sourcePoint"/>
                        <mxPoint x="749" y="1697.88" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="749" y="1677.88"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="171" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="170">
                    <mxGeometry x="0.4" y="1" relative="1" as="geometry">
                        <mxPoint x="-2" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="174" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;rounded=0;" edge="1" parent="1" source="172" target="160">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="175" value="cas&lt;br&gt;失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="174">
                    <mxGeometry x="-0.2292" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="177" value="" style="rounded=0;html=1;fontSize=11;strokeColor=#6262FC;" edge="1" parent="1" source="172" target="176">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="178" value="cas&lt;br&gt;成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="177">
                    <mxGeometry x="0.4408" y="1" relative="1" as="geometry">
                        <mxPoint x="13" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="172" value="CAS设置sizeCtl为-1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="714" y="1696.7600000000002" width="70" height="37.25" as="geometry"/>
                </mxCell>
                <mxCell id="186" style="edgeStyle=none;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;strokeColor=#6262FC;" edge="1" parent="1" source="176" target="185">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="176" value="tab==null||&lt;br&gt;tab.length==0" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="699" y="1769.88" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="179" value="" style="edgeStyle=none;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#6262FC;" edge="1" parent="1" source="176" target="181">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="802.8178633975481" y="1665.774045534151" as="sourcePoint"/>
                        <mxPoint x="833" y="1666.0454676258996" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="180" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="179">
                    <mxGeometry x="0.3207" y="-3" relative="1" as="geometry">
                        <mxPoint x="-8" y="-2" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="184" style="edgeStyle=none;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;strokeColor=#6262FC;" edge="1" parent="1" source="181" target="183">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="181" value="容量n=(sc&amp;gt;0)?sc:16" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="826" y="1773.63" width="130" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="182" value="&lt;span style=&quot;font-size: 10px&quot;&gt;这里其实是看是否调用第二个构造函数先分配了容量，如果是则取分配的容量值&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="973" y="1758.63" width="133" height="62.5" as="geometry"/>
                </mxCell>
                <mxCell id="187" style="edgeStyle=none;rounded=0;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;strokeColor=#6262FC;" edge="1" parent="1" source="183" target="185">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="183" value="创建容量为n的数组&lt;br&gt;sc=0.75n" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="826" y="1823.88" width="130" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="185" value="sizeCtl=sc" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="705" y="1827.88" width="89" height="24.5" as="geometry"/>
                </mxCell>
                <mxCell id="189" value="返回tab" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="705" y="1885.88" width="89" height="24.5" as="geometry"/>
                </mxCell>
                <mxCell id="191" value="" style="rounded=0;html=1;fontSize=11;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#6262FC;" edge="1" parent="1" source="185" target="189">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="759" y="1744.0100000000002" as="sourcePoint"/>
                        <mxPoint x="759" y="1779.88" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="192" value="break" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="191">
                    <mxGeometry x="0.4408" y="1" relative="1" as="geometry">
                        <mxPoint x="-1" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="193" value="&lt;span style=&quot;font-size: 10px&quot;&gt;这里tab可能是自己创建的，也可能是其他线程创建的&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="799.5" y="1871.69" width="126" height="43.5" as="geometry"/>
                </mxCell>
                <mxCell id="194" value="&lt;span style=&quot;font-size: 10px&quot;&gt;可以看到，在initTable函数中并没有使用锁的机制，而是仅仅使用了cas+自旋的操作保证了单个线程创建桶数组&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#4caf50;align=left;" vertex="1" parent="1">
                    <mxGeometry x="973" y="1552.88" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="196" value="返回tab" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="834" y="1555.38" width="57" height="22.5" as="geometry"/>
                </mxCell>
                <mxCell id="199" value="f=table[(n-1)&amp;amp;hash]&lt;br&gt;f==null?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="288.57" y="1637.5" width="122.92" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="201" style="edgeStyle=none;html=1;fontSize=11;" edge="1" parent="1" source="152" target="199">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="350" y="1590" as="sourcePoint"/>
                        <mxPoint x="360.03" y="1570" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="202" value="&lt;font color=&quot;#000000&quot;&gt;否&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#4caf50;" vertex="1" connectable="0" parent="201">
                    <mxGeometry x="0.4578" y="3" relative="1" as="geometry">
                        <mxPoint x="-3" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="205" style="rounded=0;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="199" target="208">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="402.52" y="1607.5" as="sourcePoint"/>
                        <mxPoint x="436.8599999999999" y="1655" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="206" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="205">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="-10" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="278" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="208" target="276">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="620" y="1620" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="281" value="cas&lt;br&gt;失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="278">
                    <mxGeometry x="-0.7273" y="-3" relative="1" as="geometry">
                        <mxPoint x="13" y="-4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="290" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="208" target="292">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="505" y="1700"/>
                            <mxPoint x="610" y="1700"/>
                            <mxPoint x="610" y="2090"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="291" value="cas成功，break" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="290">
                    <mxGeometry x="-0.9468" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="208" value="CAS设置该桶位的元素为一个新创建的Node" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="439.36999999999995" y="1637.5" width="131.25" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="222" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
                    <mxGeometry x="266.68" y="1775.19" width="323.32" height="341.81" as="geometry"/>
                </mxCell>
                <mxCell id="216" value="f.hash==MOVE?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="288.57" y="1710.88" width="122.92" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="217" value="&lt;span style=&quot;font-size: 10px&quot;&gt;f是table[(n-1)&amp;amp;hash&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;]节点，即对应下标的第一个桶节点&lt;br&gt;如果是MOVE则表示当前正在进行扩容，需要先进行协助扩容&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="128.25" y="1702" width="131.43" height="74.69" as="geometry"/>
                </mxCell>
                <mxCell id="277" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="219" target="276">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="219" value="调用helpTransfer方法协助扩容" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="445.24" y="1707.13" width="87.94" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="220" style="rounded=0;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="216" target="219">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="360.03" y="1632.25" as="sourcePoint"/>
                        <mxPoint x="360.0250000000001" y="1659.75" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="221" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="220">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="-11" y="-4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="226" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="223" target="225">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="223" value="对桶元素上锁&lt;br&gt;synchronize(f)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="313.73" y="1784.44" width="71.96" height="26.75" as="geometry"/>
                </mxCell>
                <mxCell id="225" value="tabAt(tab, i) == f" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="288.25" y="1825.19" width="122.92" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="227" value="f.hash&amp;gt;0?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="299.71" y="1884.19" width="100" height="24.93" as="geometry"/>
                </mxCell>
                <mxCell id="257" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="229" target="256">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="259" value="能找到&lt;br&gt;对应key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="257">
                    <mxGeometry x="0.1553" y="1" relative="1" as="geometry">
                        <mxPoint x="-4" y="-12" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="229" value="链表put逻辑" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="429.33" y="1885.42" width="74.35" height="22.46" as="geometry"/>
                </mxCell>
                <mxCell id="232" style="rounded=0;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="227" target="229">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="421.17" y="1771.5000000000002" as="sourcePoint"/>
                        <mxPoint x="449.0499999999999" y="1771.1200000000001" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="233" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="232">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="-10" y="-4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="284" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" target="283">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="350.71000000000004" y="1954.0499999999997" as="sourcePoint"/>
                        <mxPoint x="348.9022781878707" y="1976" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="285" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="284">
                    <mxGeometry x="-0.5017" y="-1" relative="1" as="geometry">
                        <mxPoint x="8" y="5" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="234" value="f是TreeBin类型?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="299.71" y="1929.1200000000001" width="100" height="24.93" as="geometry"/>
                </mxCell>
                <mxCell id="258" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="235" target="256">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="261" value="能找到&lt;br&gt;对应key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="258">
                    <mxGeometry x="-0.5246" relative="1" as="geometry">
                        <mxPoint x="16" y="11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="235" value="红黑树put逻辑" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="429.33" y="1934.5000000000002" width="74.35" height="22.46" as="geometry"/>
                </mxCell>
                <mxCell id="237" style="rounded=0;html=1;fontSize=11;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="234" target="235">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="409.71" y="1906.655" as="sourcePoint"/>
                        <mxPoint x="435.3300000000001" y="1906.6499999999999" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="238" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="237">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="-10" y="-4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="240" style="edgeStyle=none;html=1;fontSize=11;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="227" target="234">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="359.71" y="1609.1200000000001" as="sourcePoint"/>
                        <mxPoint x="359.71" y="1634.1200000000001" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="241" value="&lt;font color=&quot;#000000&quot;&gt;否&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#4caf50;" vertex="1" connectable="0" parent="240">
                    <mxGeometry x="0.4578" y="3" relative="1" as="geometry">
                        <mxPoint x="5" y="-7" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="242" style="rounded=0;html=1;fontSize=11;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="225" target="227">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="359.71" y="1656.69" as="sourcePoint"/>
                        <mxPoint x="359.7050000000001" y="1684.19" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="243" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;" vertex="1" connectable="0" parent="242">
                    <mxGeometry x="0.4448" y="-3" relative="1" as="geometry">
                        <mxPoint x="3" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="253" value="" style="rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="264" target="252">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="254" value="binCount!=0&lt;br&gt;break出来" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="253">
                    <mxGeometry x="-0.4921" relative="1" as="geometry">
                        <mxPoint x="2" y="5" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="265" value="" style="rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="244" target="264">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="270" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="244" target="152">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="260" y="2052"/>
                            <mxPoint x="260" y="1575"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="271" value="binCount==0&lt;br&gt;回到循环" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="270">
                    <mxGeometry x="-0.7971" relative="1" as="geometry">
                        <mxPoint x="7" y="-52" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="244" value="根据binCount进行树化操作" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="302.63" y="2036.5700000000002" width="97.15" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="248" value="&lt;span style=&quot;font-size: 10px&quot;&gt;这里和HashMap稍微不同，这里是桶元素为8个的时候就进行树化，而HashMap则是需要达到&amp;gt;8个元素&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="411.49" y="2001.3100000000002" width="131.43" height="74.69" as="geometry"/>
                </mxCell>
                <mxCell id="249" style="edgeStyle=none;html=1;fontSize=11;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="216" target="223">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="360.03" y="1586" as="sourcePoint"/>
                        <mxPoint x="360.03" y="1611" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="250" value="&lt;font color=&quot;#000000&quot;&gt;否&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#4caf50;" vertex="1" connectable="0" parent="249">
                    <mxGeometry x="0.4578" y="3" relative="1" as="geometry">
                        <mxPoint x="-3" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="269" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="252" target="268">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="252" value="调用addCount计算新的size" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="306.52" y="2158.67" width="87.94" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="255" value="&lt;span style=&quot;font-size: 10px&quot;&gt;size值分散保存在baseCount和counterCells各个元素中，当调用sumCount求和时才会计算完整的size&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="290" y="2210" width="131.3" height="53.67" as="geometry"/>
                </mxCell>
                <mxCell id="262" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="256" target="283">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="256" value="设置oldValue" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="516.27" y="1910" width="69.73" height="23.12" as="geometry"/>
                </mxCell>
                <mxCell id="263" value="返回oldValue" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="436.03" y="2085.25" width="97.15" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="267" style="edgeStyle=none;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="264" target="263">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="264" value="oldValue!=null" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="301.52" y="2087.78" width="100" height="24.93" as="geometry"/>
                </mxCell>
                <mxCell id="268" value="返回null" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="433.48999999999995" y="2163.67" width="97.15" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="274" style="edgeStyle=none;html=1;fontSize=11;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="199" target="216">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="360.03" y="1600" as="sourcePoint"/>
                        <mxPoint x="360.03" y="1647.5" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="275" value="&lt;font color=&quot;#000000&quot;&gt;否&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#4caf50;" vertex="1" connectable="0" parent="274">
                    <mxGeometry x="0.4578" y="3" relative="1" as="geometry">
                        <mxPoint x="-3" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="280" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="276" target="152">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="619" y="1550"/>
                            <mxPoint x="373" y="1550"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="276" value="while循环(自旋)回到第一个判断" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="585" y="1561.06" width="81.25" height="27.88" as="geometry"/>
                </mxCell>
                <mxCell id="282" value="else" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="266.68" y="1775.19" width="43.32" height="17.81" as="geometry"/>
                </mxCell>
                <mxCell id="288" style="edgeStyle=none;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="283" target="244">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="283" value="桶元素f解锁" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="317.9" y="1986" width="66.27" height="25.19" as="geometry"/>
                </mxCell>
                <mxCell id="287" value="&lt;span style=&quot;font-size: 10px&quot;&gt;put操作时执行会设置binCount的值&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="431.28" y="1838.06" width="101.11" height="35.82" as="geometry"/>
                </mxCell>
                <mxCell id="292" value="break跳出while" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="553" y="2121" width="112.25" height="32.78" as="geometry"/>
                </mxCell>
                <mxCell id="295" value="在addCount函数内统计完size后会判断是否需要进行扩容操作(transfer方法)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="233.97" y="2270" width="201.25" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="296" value="&lt;span style=&quot;font-size: 10px&quot;&gt;具体操作和HashMap中的基本相同，不赘述&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="429.33" y="1806.13" width="110.67" height="33.87" as="geometry"/>
                </mxCell>
                <mxCell id="297" value="&lt;span style=&quot;font-size: 10px&quot;&gt;内部调用transfer方法转移&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="442.33" y="1743.38" width="117.67" height="26.62" as="geometry"/>
                </mxCell>
                <mxCell id="299" value="void&amp;nbsp;transfer(Node&amp;lt;K,V&amp;gt;[] tab, Node&amp;lt;K,V&amp;gt;[] nextTab)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="230" y="2330" width="306.03" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="303" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="300" target="302">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="300" value="计算分配给当前线程的迁移步长stride" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="259.68" y="2360" width="100.32" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="301" value="&lt;span style=&quot;font-size: 10px&quot;&gt;即当前线程负责迁移的任务量，计算方法为：&lt;br&gt;①只有单核，不存在协助扩容，直接分配n(n为原来桶数组的容量)&lt;br&gt;②多核，分配量为max(16,&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;(n&amp;gt;&amp;gt;&amp;gt;3)/NCPU&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;)，即最小任务量为16&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="372.38" y="2360" width="147.62" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="306" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="302" target="305">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="302" value="nextTab==null?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="259.67999999999995" y="2420" width="100" height="24.93" as="geometry"/>
                </mxCell>
                <mxCell id="304" value="&lt;span style=&quot;font-size: 10px&quot;&gt;nextTab==null时表示是第一次进行迁移，需要为newTab创建2n大小的空间&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="90" y="2407.47" width="136.25" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="309" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="305" target="308">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="305" value="创建大小为2n的桶数组空间赋值到newTab和newTable中" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="254.68" y="2470" width="110" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="307" value="&lt;span style=&quot;font-size: 10px&quot;&gt;newTable是成员变量&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="133.97" y="2480" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="312" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="308" target="311">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="308" value="设置transferIndex=n" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="257.02" y="2530" width="105.32" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="310" value="&lt;span style=&quot;font-size: 10px&quot;&gt;transferIndex也是成员变量，用于控制当前迁移的起始位置&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="90" y="2530" width="138.34" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="314" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" target="313">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="309.79999999999995" y="2641" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="379" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="311" target="313">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="311" value="创建ForwardingNode fwd" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="253.43" y="2580" width="112.82" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="317" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="313" target="316">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="313" value="第一次：cas+自旋的方式设置&lt;br&gt;i=transferIndex，bound=transferIndex-stride，&lt;br&gt;transfer-=stride&lt;br&gt;后面：判断--i==bound?，若为true则表示迁移任务完成" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="231.53" y="2630" width="157.16" height="91" as="geometry"/>
                </mxCell>
                <mxCell id="315" value="&lt;span style=&quot;font-size: 10px&quot;&gt;transferIndex也是成员变量，用于控制当前迁移的起始位置&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="77.91" y="2669.75" width="138.34" height="32.5" as="geometry"/>
                </mxCell>
                <mxCell id="319" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="316" target="318">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="320" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="319">
                    <mxGeometry x="-0.494" y="-1" relative="1" as="geometry">
                        <mxPoint x="8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="348" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="316" target="340">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="349" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="348">
                    <mxGeometry x="-0.5256" y="1" relative="1" as="geometry">
                        <mxPoint x="-1" y="2" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="316" value="当前任务完成?&lt;br&gt;(查看i的值)" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="249.52" y="2744.77" width="120.32" height="32.46" as="geometry"/>
                </mxCell>
                <mxCell id="318" value="finish==true?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="543.72" y="2744.77" width="94.05" height="36.23" as="geometry"/>
                </mxCell>
                <mxCell id="322" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="318" target="324">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="646.3823893294473" y="2760.597762985091" as="sourcePoint"/>
                        <mxPoint x="692.2268448957691" y="2761.1783844702422" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="323" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="322">
                    <mxGeometry x="-0.494" y="-1" relative="1" as="geometry">
                        <mxPoint x="8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="324" value="nextTab=null&lt;br&gt;table=nextTab&lt;br&gt;sizeCtl=0.75n&lt;br&gt;返回" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="692.23" y="2731.33" width="100" height="63.11" as="geometry"/>
                </mxCell>
                <mxCell id="330" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="325" target="328">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="325" value="通过cas设置完成任务的信息到sizeCtl中" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="540" y="2811" width="101.49" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="326" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="318" target="325">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="647.77" y="2772.885" as="sourcePoint"/>
                        <mxPoint x="702.23" y="2772.89" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="327" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="326">
                    <mxGeometry x="-0.494" y="-1" relative="1" as="geometry">
                        <mxPoint x="1" y="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="332" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="328" target="331">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="333" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="332">
                    <mxGeometry x="-0.5145" relative="1" as="geometry">
                        <mxPoint x="11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="328" value="整个哈希表的迁移工作都已完成?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="543.7200000000001" y="2881" width="94.05" height="36.23" as="geometry"/>
                </mxCell>
                <mxCell id="329" value="&lt;span style=&quot;font-size: 10px&quot;&gt;整个哈希表的迁移工作都已完成?&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="543.4" y="2711" width="84.97" height="32.17" as="geometry"/>
                </mxCell>
                <mxCell id="334" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="331" target="313">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="810" y="2899"/>
                            <mxPoint x="810" y="2676"/>
                            <mxPoint x="610" y="2676"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="331" value="finish=true" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="685.23" y="2884.28" width="100" height="29.67" as="geometry"/>
                </mxCell>
                <mxCell id="335" value="&lt;span style=&quot;font-size: 10px&quot;&gt;在下一轮循环中即会在finish==true的判断中退出循环&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="752.87" y="2917.23" width="93.36" height="43.77" as="geometry"/>
                </mxCell>
                <mxCell id="336" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="328" target="338">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="647.7700000000002" y="2909.1150000000002" as="sourcePoint"/>
                        <mxPoint x="695.23" y="2909.1150000000002" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="337" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="336">
                    <mxGeometry x="-0.5145" relative="1" as="geometry">
                        <mxPoint x="-1" y="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="338" value="直接退出" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="554.63" y="2946" width="72.23" height="29.67" as="geometry"/>
                </mxCell>
                <mxCell id="339" value="&lt;span style=&quot;font-size: 10px&quot;&gt;这里则表示完成了自己的任务，但总体任务还未完成&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="630.55" y="2946" width="93.36" height="43.77" as="geometry"/>
                </mxCell>
                <mxCell id="343" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="340" target="342">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="344" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="343">
                    <mxGeometry x="-0.3265" y="1" relative="1" as="geometry">
                        <mxPoint x="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="340" value="第i个桶值为null?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="249.67999999999998" y="2811" width="120.32" height="32.46" as="geometry"/>
                </mxCell>
                <mxCell id="342" value="直接cas设置fwd到当前节点，cas结果设置到advance" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="409.98999999999995" y="2805.51" width="93.69" height="43.44" as="geometry"/>
                </mxCell>
                <mxCell id="359" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="351" target="358">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="360" value="否，进入链表或&lt;br&gt;红黑树的迁移逻辑" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="359">
                    <mxGeometry x="-0.521" y="2" relative="1" as="geometry">
                        <mxPoint x="-2" y="9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="351" value="f.hash==MOVED?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="249.51999999999995" y="2871" width="120.32" height="32.46" as="geometry"/>
                </mxCell>
                <mxCell id="352" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" target="354" parent="1" source="351">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="359.6800000000001" y="2887.2300000000005" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="353" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="352">
                    <mxGeometry x="-0.3265" y="1" relative="1" as="geometry">
                        <mxPoint x="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="354" value="advance=true" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="409.99" y="2873.26" width="90.82" height="27.95" as="geometry"/>
                </mxCell>
                <mxCell id="355" value="&lt;span style=&quot;font-size: 10px&quot;&gt;如果当前桶位置的节点为fwd，表示已经迁移过了&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="97.72" y="2868.92" width="115.5" height="32.29" as="geometry"/>
                </mxCell>
                <mxCell id="356" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="340" target="351">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="319.68000000000006" y="2787.2300000000005" as="sourcePoint"/>
                        <mxPoint x="319.78810879756475" y="2821.013999238955" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="357" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="356">
                    <mxGeometry x="-0.5256" y="1" relative="1" as="geometry">
                        <mxPoint x="-1" y="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="363" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="358" target="362">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="358" value="synchronized(f)&lt;br&gt;对桶首节点加锁" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="264.43" y="2953.91" width="90.82" height="27.95" as="geometry"/>
                </mxCell>
                <mxCell id="369" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="362" target="368">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="362" value="f.hash&amp;gt;0?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="249.68" y="3001" width="120.32" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="364" value="&lt;span style=&quot;font-size: 10px&quot;&gt;链表迁移&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="158.97" y="3003.63" width="50" height="29.83" as="geometry"/>
                </mxCell>
                <mxCell id="371" value="" style="edgeStyle=none;rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="365" target="370">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="377" value="" style="rounded=0;html=1;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="365" target="376">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="365" value="f是TreeBin?" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="250.52" y="3061" width="120.48" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="366" style="rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="362" target="365">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="319.84000000000015" y="2853.46" as="sourcePoint"/>
                        <mxPoint x="319.7392698565902" y="2881.01598985659" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="367" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="366">
                    <mxGeometry x="-0.5256" y="1" relative="1" as="geometry">
                        <mxPoint x="-1" y="4" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="373" style="rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="368" target="372">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="368" value="链表迁移，分成高位链和低位链" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="394.46" y="3001" width="98.48" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="374" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="370" target="372">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="370" value="红黑树迁移" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="394.46" y="3061" width="98.48" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="378" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="372" target="376">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="372" value="迁移结束设置fwd&lt;br&gt;advance=true" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="500.80999999999995" y="3031" width="98.48" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="375" value="&lt;span style=&quot;font-size: 10px&quot;&gt;advance 指的是做完了一个位置的迁移工作，可以准备做下一个位置的了&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="609.38" y="3033.46" width="170.62" height="37.54" as="geometry"/>
                </mxCell>
                <mxCell id="381" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#000000;strokeColor=#000000;" edge="1" parent="1" source="376" target="313">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="382" value="外层for&lt;br&gt;继续循环" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#000000;" vertex="1" connectable="0" parent="381">
                    <mxGeometry x="-0.1577" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="376" value="解锁f" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="278.52000000000004" y="3111" width="64.65" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="380" value="&lt;span style=&quot;font-size: 10px&quot;&gt;代码中的while(advance)部分，即第一次是分配任务，迁移范围为(bound, i]，后面每完成一个任务则--i，直到任务全部完成&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontColor=#A87ED8;align=left;" vertex="1" parent="1">
                    <mxGeometry x="404.43999999999994" y="2600" width="145.54" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>